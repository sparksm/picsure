!function(a){"use strict";console.log(a),a.picsure=function(b,c){this.$element=a(c),this.options=b,this.num=Math.round(1e20*Math.random()),this.density=+window.devicePixelRatio||1,this.imageSetCss=function(){var a=document.createElement("div");return a.style.backgroundImage="",a.style.backgroundImage="-webkit-image-set(url() 1x)",""!==a.style.backgroundImage?!0:!1}(),this.original=this.$element.attr("src"),this.setOptions(),this.set=this.parseParams(),this.options.picture||(this.passed=this.tester(),this.setPassed(),this.bind())},a.picsure.settings={picture:!1},a.picsure.prototype={bind:function(){var b=this;a(window).on("resize",function(){b.passed=b.tester(),b.setPassed()})},setOptions:function(){this.options=a.extend(!0,{},this.settings,this.options)},setPassed:function(){var b=this;return 0===b.passed.length?(b.$element.attr("src")!==b.original&&b.$element.attr("src",b.original),void 0):(a.each(b.passed,function(a){b.$element.attr("src")!==b.passed[a]&&b.$element.attr("src",b.passed[a])}),void 0)},parseParams:function(){if(!this.options.picture){var b=a.trim(this.$element.attr("srcset"));if(!b.match(" "))return b;var c=b.split(","),d=[];return a.each(c,function(b){var e="",f=[],g=a.trim(c[b]).split(" ");a.each(g,function(a){if(0===a)return e=g[a],void 0;var b=g[a][g[a].length-1];b.match(/[whx]/)&&f.push({type:b,value:+g[a].slice(0,g[a].length-1),pass:e})}),d.push(f)}),d}this.$element.addClass("picsure_"+this.num)},tester:function(){var b=this,c=[];return a.each(b.set,function(d){var e=!0;a.each(b.set[d],function(a){var c=b.set[d][a];b.testCondition(c)||(e=!1)}),e&&c.push(b.set[d][0].pass)}),c},testCondition:function(b){switch(b.type){case"w":return a(window).width()<b.value?!0:!1;case"h":return a(window).height()<b.value?!0:!1;case"x":return this.density===b.value?!0:!1;default:return!1}}},a.fn.picsure=function(b){if("string"==typeof b){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var d=a.data(this,"picsure");return d?a.isFunction(d[b])?(d[b].apply(d,c),void 0):(a.error('No such method "'+b+'"'),void 0):(a.error('Cannot call "'+b+'" method prior to initialization.'),void 0)})}else this.each(function(){var c=a.data(this,"picsure");c&&c.destroy(),a.data(this,"picsure",new a.picsure(b,this))});return this},a(function(){var b=a("img:not(picture img)"),c=a("picture");b.picsure(),c.picsure({picture:!0})})}(jQuery);